language: java

jdk:
    - oraclejdk7

install:
    # install necessary x32-libs for Android SDK
    - sudo apt-get update
    - sudo apt-get install -u lib32stdc++6 lib32z1
    # download and extract Android SDK
    - wget http//dl.google.com/android/android-sdk_r23.0.2-linux.tgz
    - tar -zxf android-sdk_r23.0.2-linux.tgz
    - export ANDROID_HOME=`pwd`/android-sdk-linux
    - export PATH=${PATH}:${ANDROID_HOME}/tools:${ANDROID_HOME}/platform-tools
    - echo "y" | android update sdk -a --filter tools,platform-tools,build-tools-21.0.0,android-21 --no-ui --force
    - ./gradlew clean assemble

before_script:
    - mkdir -p shippable/testresults

script:
    - ./gradlew check

after_script:
    - cp -r build/test-results/* shippable/testresults/