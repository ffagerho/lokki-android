language: java

jdk:
    - oraclejdk7

install:
    # install necessary x32-libs for Android SDK
    - sudo apt-get update
    - sudo apt-get install -u lib32stdc++6 lib32z1
    # download and extract Android SDK
    - wget http://dl.google.com/android/android-sdk_r24.0.2-linux.tgz
    - tar xzf android-sdk_r24.0.2-linux.tgz
    - export ANDROID_HOME=`pwd`/android-sdk-linux
    - export PATH=${PATH}:${ANDROID_HOME}/tools:${ANDROID_HOME}/platform-tools
    - echo "y" | android update sdk -a --filter platform-tools,tools,build-tools-21.1.2,extra-android-m2repository,extra-google-m2repository,android-21,extra-google-google_play_services,sys-img-armeabi-v7a-android-21 --no-ui --force
    - java -version
    - javac -version
    - ls -laR /home/shippable/workspace/src/github.com/ffagerho/lokki-android/android-sdk-linux/
    - ./gradlew clean assemble

before_script:
    - mkdir -p shippable/testresults

script:
    - ./gradlew check

after_script:
    - cp -r build/test-results/* shippable/testresults/